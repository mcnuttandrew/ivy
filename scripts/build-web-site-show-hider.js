const {getFile, writeFile} = require('hoopoe');
const {tsvParse} = require('d3-dsv');
getFile('./backups/Ivy-Gallery-Rebuild.tsv')
  .then(x => tsvParse(x))
  .then(instances => {
    const solvedInstances = instances.filter(row => row.Instance).map(x => x.Title);
    console.log(
      `
const done = new Set(${JSON.stringify(solvedInstances)});
[...document.querySelectorAll('.imagegroup')].forEach(node => {
  if (done.has(node.textContent.trim())) {
    node.setAttribute('style', 'opacity:0.2');
  }
});
      `,
    );
  });

// const done = new Set([
//   'Simple Bar Chart',
//   'Responsive Bar Chart',
//   'Aggregate Bar Chart',
//   'Aggregate Bar Chart (Sorted)',
//   'Grouped Bar Chart',
//   'Stacked Bar Chart',
//   'Stacked Bar Chart with Rounded Corners',
//   'Horizontal Stacked Bar Chart',
//   'Normalized (Percentage) Stacked Bar Chart',
//   'Gantt Chart (Ranged Bar Marks)',
//   'A Bar Chart Encoding Color Names in the Data',
//   'Layered Bar Chart',
//   'Diverging Stacked Bar Chart (Population Pyramid)',
//   'Diverging Stacked Bar Chart (with Neutral Parts)',
//   'Bar Chart with Labels',
//   'Bar Chart with Label Overlays',
//   'Bar Chart showing Initials of Month Names',
//   'Bar Chart with negative values and a zero-baseline',
//   'Bar Chart with a spacing-saving y-axis',
//   '2D Histogram Scatterplot',
//   '2D Histogram Heatmap',
//   'Scatterplot',
//   '1D Strip Plot',
//   'Strip Plot',
//   'Colored Scatterplot',
//   '2D Histogram Scatterplot',
//   'Bubble Plot',
//   'Scatterplot with Null Values in Grey',
//   'Scatterplot with Filled Circles',
//   'Bubble Plot (Gapminder)',
//   'Bubble Plot (Natural Disasters)',
//   'Scatter Plot with Text Marks',
//   'Image-based Scatter Plot',
//   'Line Chart',
//   'Line Chart with Point Markers',
//   'Line Chart with Stroked Point Markers',
//   'Multi Series Line Chart',
//   'Multi Series Line Chart with Repeat Operator',
//   'Slope Graph',
//   'Step Chart',
//   'Line Chart with Monotone Interpolation',
//   'Line Chart with Conditional Axis Properties',
//   'Connected Scatterplot (Lines with Custom Paths)',
//   'Line Chart with Varying Size (using the trail mark)',
//   'Line Chart with Markers and Invalid Values',
//   'Carbon Dioxide in the Atmosphere',
//   'Line Charts Showing Ranks Over Time',
//   'Drawing Sine and Cosine Curves with the Sequence Generator',
//   'Line chart with varying stroke dash',
//   'Line chart with a dashed part',
//   'Area Chart',
//   'Area Chart with Gradient',
//   'Area Chart with Overlaying Lines and Point Markers',
//   'Stacked Area Chart',
//   'Normalized Stacked Area Chart',
//   'Streamgraph',
//   'Horizon Graph',
//   'Table Heatmap',
//   'Annual Weather Heatmap',
//   '2D Histogram Heatmap',
//   'Table Bubble Plot (Github Punch Card)',
//   'Heatmap with Labels',
//   'Lasagna Plot (Dense Time-Series Heatmap)',
//   'Mosaic Chart with Labels',
//   'Wind Vector Map',
//   'Pie Chart',
//   'Donut Chart',
//   'Pie Chart with Labels',
//   'Radial Plot',
//   'Pyramid Pie Chart',
//   'Line Charts Showing Ranks Over Time',
//   'Waterfall Chart of Monthly Profit and Loss',
//   'Filtering Top-K Items',
//   'Parallel Coordinate Plot',
//   'Bar Chart Showing Argmax Value',
//   'Layering Averages over Raw Values',
//   'Layering Rolling Averages over Raw Values',
//   'Quantile-Quantile Plot (QQ Plot)',
//   'Linear Regression',
//   'Loess Regression',
//   'Error Bars Showing Confidence Interval',
//   'Error Bars Showing Standard Deviation',
//   'Line Chart with Confidence Interval Band',
//   'Scatterplot with Mean and Standard Deviation Overlay',
//   'Box Plot with Min/Max Whiskers',
//   'Tukey Box Plot (1.5 IQR)',
//   'Box Plot with Pre-Calculated Summaries',
//   'Simple Bar Chart with Labels',
//   'Simple Bar Chart with Labels and Emojis',
//   'Layering text over heatmap',
//   'Carbon Dioxide in the Atmosphere',
//   'Layering Averages over Raw Values',
//   'Layering Rolling Averages over Raw Values',
//   'Distributions and Medians of Likert Scale Ratings',
//   'Comparative Likert Scale Ratings',
//   'Ranged Dot Plot',
//   'Layered Plot with Dual-Axis',
//   'Horizon Graph',
//   'Trellis Bar Chart',
//   'Trellis Stacked Bar Chart',
//   'Trellis Scatter Plot (wrapped)',
//   'Trellis Histograms',
//   'Trellis Scatter Plot Showing Anscombe’s Quartet',
//   'Becker’s Barley Trellis Plot',
//   'Trellis Area',
//   'Trellis Area Plot Showing Annual Temperatures in Seattle',
//   'Faceted Density Plot',
//   'Repeat and Layer to Show Different Weather Measures',
//   'Horizontally Repeated Charts',
//   'Interactive Scatterplot Matrix',
//   'Discretizing scales',
//   'Population Pyramid',
//   'London Tube Lines',
//   'Interactive Legend',
//   'Area Chart with Rectangular Brush',
//   'Scatterplot Pan & Zoom',
//   'Isotype Grid',
//   'Selectable Heatmap',
//   'Interactive Index Chart',
//   'Overview and Detail',
//   'Crossfilter',
//   'Interactive Scatterplot Matrix',
//   'Interactive Dashboard with Cross Highlight',
// ]);
// [...document.querySelectorAll('.imagegroup')].forEach(node => {
//   if (done.has(node.textContent.trim())) {
//     node.setAttribute('style', 'opacity:0.2');
//   }
// });
